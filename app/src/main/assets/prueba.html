<!DOCTYPE html>
<html>
<head>
	<title>leaflet</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
		  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
		  crossorigin=""/>
	<!-- Make sure you put this AFTER Leaflet's CSS -->
	<script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
			integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
			crossorigin="">
	</script>

</head>
<body>

<div id="mapid" style="width: 600px; height: 400px;"></div>

<script>
        //Array que contiene el icono de un usuario
		var markerUsuario=[];
		var coordenadas_rawson=[-43.2991348,-65.1056655];
		var mymap = L.map('mapid').setView(coordenadas_rawson,12);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			id: 'mapbox.streets'
		}).addTo(mymap);


		// zoom the map to the polyline
		mymap.fitBounds(polyline.getBounds());

		/***FUNCIONES***/
		function mostrarPosicion(latitud,longitud){
			var coordenadas_usuario=[latitud,longitud];

			//Creo el icono para dibujar al usuario en el mapa
            var iconoUsuario = L.icon({
                iconUrl: 'usuario.png',
                iconSize: [45, 45] // size of the icon
            });

            //Si ya hay un icono de usuario en el mapa lo elimino y creo uno nuevo
			if(markerUsuario==[]){
				markerUsuario = L.marker(coordenadas_usuario,{icon: iconoUsuario}).addTo(mymap).bindPopup('<b>Usted esta aqui</b>').openPopup();
				mymap.setView(coordenadas_usuario,16);
			}else{
				mymap.removeLayer(iconoUsuario);
				markerUsuario = L.marker(coordenadas_usuario,{icon: iconoUsuario}).addTo(mymap).bindPopup('<b>Usted esta aqui</b>').openPopup();
				mymap.setView(coordenadas_usuario,16);
			}
		}

</script>
</body>
</html>